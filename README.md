<div align="center">

<img src="assets/icon128.png" alt="WebScribe Logo" width="96" height="96" />

# WebScribe

**Convert any webpage into clean, structured notes â€” one click, completely offline.**

[![Manifest V3](https://img.shields.io/badge/Manifest-V3-5865F2?style=flat-square&logo=googlechrome&logoColor=white)](https://developer.chrome.com/docs/extensions/mv3/)
[![License: MIT](https://img.shields.io/badge/License-MIT-22c55e?style=flat-square)](LICENSE)
[![No Build Step](https://img.shields.io/badge/Build-None%20Required-f59e0b?style=flat-square)](manifest.json)
[![Privacy First](https://img.shields.io/badge/Data-Stays%20in%20Browser-a78bfa?style=flat-square)](#privacy)

**Works even when copy is blocked Â· No login Â· No API key Â· No cloud**

---

[Features](#features) Â· [Screenshots](#screenshots) Â· [How It Works](#how-it-works) Â· [Installation](#installation) Â· [Architecture](#architecture) Â· [Roadmap](#roadmap) Â· [Contributing](#contributing)

</div>

---

## What Is WebScribe?

WebScribe is a Chrome extension that extracts the readable content from **any webpage** â€” including pages that block copy-paste â€” and exports it as a clean **Markdown file** or a styled **PDF**. It was built for students, developers, and researchers who need to save information without fighting with copy restrictions, messy print outputs, or scattered notes.

> **The key insight:** Copy restrictions prevent clipboard access, not DOM access. WebScribe reads the page's rendered DOM directly â€” exactly what you see in Chrome DevTools â†’ Elements â€” making copy restrictions irrelevant.

---

## Screenshots

### Popup UI in action on a copy-restricted page (ServiceNow / Inkling)

<img src="public/webscribe_popup_oon_webpage.png" alt="WebScribe popup open on a copy-restricted Inkling / ServiceNow page" width="100%" />

> The extension works on `servicenow.read.inkling.com` â€” a platform that blocks right-click, text selection, and copy-paste. WebScribe extracts the full chapter content directly from the live DOM.

---

### The popup

<img src="public/webscribe_popup_full_image.png" alt="WebScribe popup â€” full view" width="420" />

A dark glassmorphism design with format selector, options toggles, and a one-click export button. The green dot confirms the extension is active and connected to the current tab.

---

### Markdown export â€” VS Code preview

<img src="public/markdown_file_generated_using_webscribe.png" alt="Markdown file generated by WebScribe â€” shown in VS Code with YAML frontmatter and AI notes" width="100%" />

The exported `.md` file includes:
- **YAML frontmatter** (`title`, `source`, `date`, `tags`) â€” ready for Obsidian or any note app
- **âœ¨ AI-Generated Notes** â€” auto-extracted summary, key points, and term definitions (no API key)
- **Table of Contents** â€” auto-linked from all headings
- Full article content with headings, lists, code blocks, tables, and image links

---

### PDF export â€” styled preview page

<img src="public/pdf_file_generated_using_webscribe.png" alt="WebScribe PDF viewer â€” styled print-ready preview with Save as PDF button" width="100%" />

The PDF viewer opens as a dedicated tab (`chrome-extension://â€¦/viewer/viewer.html`) with a styled, print-ready layout. Press **Ctrl+P â†’ Save as PDF** to get a clean, selectable-text PDF â€” no canvas rendering, no image PDFs.

---

## Features

| Feature | Details |
|---|---|
| ğŸ”“ **Bypass copy restrictions** | Reads `innerText` from the live DOM â€” unaffected by `user-select:none` or clipboard event blockers |
| ğŸ“„ **Markdown export** | Clean `.md` with YAML frontmatter, TOC, and Obsidian-compatible formatting |
| ğŸ–¨ **PDF export** | Styled print-ready HTML â†’ browser native print â†’ selectable-text PDF |
| âœ¨ **Local AI notes** | Summary, key points, and glossary terms extracted with local heuristics â€” no API key |
| ğŸªŸ **iframe support** | Injects into all frames (`allFrames: true`) â€” captures content inside embedded iframes |
| ğŸ“¦ **Fully offline** | Mozilla Readability.js bundled locally; no network calls for core features |
| ğŸ”’ **Privacy first** | All processing runs in your browser; no data leaves the device |
| âš¡ **No build step** | Pure vanilla JavaScript â€” just load the folder as an unpacked extension |

---

## How It Works

```
Browser Tab (any page)
        â”‚
        â–¼
  content/content.js  â†â”€â”€ injected into all frames (allFrames: true)
        â”‚
        â”‚  1. Scores DOM containers by text density
        â”‚  2. Walks live document.body â€” same as DevTools Elements
        â”‚  3. Visibility-aware (respects getComputedStyle)
        â”‚  4. Falls back to Mozilla Readability, then innerText
        â”‚
        â–¼
  Structured Content Model
  { metadata, nodes: [ {type, text}, â€¦ ] }
        â”‚
        â”œâ”€â”€â”€â”€ Markdown â”€â”€â–º MarkdownGenerator â†’ .md download
        â”‚
        â””â”€â”€â”€â”€ PDF â”€â”€â”€â”€â”€â”€â”€â”€â–º chrome.storage.local
                                    â”‚
                                    â–¼
                            viewer/viewer.html  (new tab)
                            renders styled HTML â†’ Ctrl+P â†’ PDF
```

### Extraction strategies (in priority order)

1. **Smart container scoring** â€” scans all `div / section / article / main` elements, scores by text density (total text minus link text + structural elements). Picks the richest non-nav container.
2. **Mozilla Readability** â€” used as an enhancement when structured walk finds fewer than 3 nodes.
3. **`innerText` split** â€” splits `document.body.innerText` on double newlines. Always succeeds.

---

## Installation

> WebScribe is not yet on the Chrome Web Store. Install it as an unpacked extension in developer mode:

### 1. Clone or download

```bash
git clone https://github.com/your-username/WebScribe.git
# â€” or â€” download the ZIP and extract it
```

### 2. Open Chrome Extensions

Navigate to `chrome://extensions/` in your browser.

### 3. Enable Developer Mode

Toggle **Developer mode** in the top-right corner of the extensions page.

### 4. Load unpacked

Click **Load unpacked** â†’ select the `WebScribe` folder (the one containing `manifest.json`).

### 5. Use it

Navigate to any webpage, click the **WebScribe** icon in the toolbar, choose your format, and click **Extract & Export**.

> **Tip:** Pin the extension to the toolbar so it's always one click away: Extensions menu (puzzle icon) â†’ pin WebScribe.

---

## Project Structure

```
WebScribe/
â”œâ”€â”€ manifest.json              # Chrome MV3 manifest
â”‚
â”œâ”€â”€ popup/
â”‚   â”œâ”€â”€ popup.html             # Extension popup shell
â”‚   â”œâ”€â”€ popup.css              # Dark glassmorphism UI
â”‚   â””â”€â”€ popup.js               # Orchestrates extract â†’ generate â†’ export
â”‚
â”œâ”€â”€ content/
â”‚   â””â”€â”€ content.js             # Content script â€” live DOM extractor
â”‚
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ Readability.js         # Mozilla Readability (bundled, no CDN)
â”‚   â”œâ”€â”€ markdown-generator.js  # Content model â†’ Obsidian Markdown
â”‚   â”œâ”€â”€ pdf-generator.js       # Legacy (reference only)
â”‚   â””â”€â”€ ai-assistant.js        # Local heuristic AI (no API key)
â”‚
â”œâ”€â”€ viewer/
â”‚   â”œâ”€â”€ viewer.html            # PDF preview page (dedicated tab)
â”‚   â””â”€â”€ viewer.js              # Renders content from chrome.storage.local
â”‚
â”œâ”€â”€ background/
â”‚   â””â”€â”€ background.js          # MV3 service worker (message routing)
â”‚
â”œâ”€â”€ assets/
â”‚   â””â”€â”€ icon{16,32,48,128}.png # Extension icons
â”‚
â””â”€â”€ public/
    â””â”€â”€ *.png                  # Screenshots used in README
```

---

## Architecture

### Content Security Policy (MV3)
All extension pages use `script-src 'self'` â€” no inline scripts, no `eval`. Every JS file is a separate, explicitly loaded module referenced by `src=""`.

### Why no build step?
All libraries (Readability.js) are bundled as plain JS files. No Webpack, Rollup, or TypeScript compilation required. This keeps the codebase auditable and easy to contribute to.

### Data flow for PDF
```
popup.js
  â””â”€ chrome.storage.local.set({ webscribe_data })
  â””â”€ chrome.tabs.create({ url: 'viewer/viewer.html' })
         â””â”€ viewer.js (DOMContentLoaded)
               â””â”€ chrome.storage.local.get('webscribe_data')
               â””â”€ buildPageHTML(data) â†’ page.innerHTML
               â””â”€ chrome.storage.local.remove('webscribe_data')
```
Using `chrome.storage.local` + `chrome.tabs.create` instead of `window.open` ensures the viewer page stays alive independently of the popup lifecycle.

---

## Permissions

| Permission | Why it's needed |
|---|---|
| `activeTab` | Access the currently active tab |
| `scripting` | Inject content scripts into pages |
| `downloads` | Save Markdown files to disk |
| `tabs` | Read tab URL to detect chrome:// pages |
| `storage` | Pass extracted content to the PDF viewer tab |
| `webNavigation` | Enumerate all frames (`getAllFrames`) for iframe support |
| `host_permissions: <all_urls>` | Allow injection on any website |

No permissions are used for analytics, tracking, or remote data collection.

---

## Privacy

- âœ… All content processing is done **locally in your browser**
- âœ… No data is sent to any server
- âœ… The AI summary uses **local heuristics only** â€” no LLM API calls
- âœ… Exported files go directly to your Downloads folder
- âœ… `chrome.storage.local` data is cleared immediately after the PDF viewer renders

---

## Roadmap

### Phase 2 â€” Integrations
- [ ] **Obsidian vault save** â€” native messaging companion to write directly to a vault
- [ ] **LLM-powered AI** â€” optional OpenAI / Gemini API key for richer summaries
- [ ] **Custom templates** â€” user-defined Markdown/PDF templates
- [ ] **Batch export** â€” export multiple open tabs at once
- [ ] **Highlight mode** â€” select text on page, extract only the selection

### Phase 3 â€” Platform
- [ ] Chrome Web Store release
- [ ] Firefox / Edge port
- [ ] Notes app integrations (Notion, Roam, Logseq)

---

## Contributing

Contributions are welcome! The codebase is intentionally small and has no build step â€” you can start contributing within minutes.

```bash
git clone https://github.com/your-username/WebScribe.git
# Edit files directly â€” no npm install, no build needed
# Load the folder as an unpacked extension to test
```

### Areas that need help
- **Site-specific extractors** â€” some platforms need custom selectors (open an issue with the URL)
- **PDF styling** â€” improve print CSS for edge cases
- **Firefox port** â€” adapt `chrome.*` calls to `browser.*` with polyfill
- **Tests** â€” add unit tests for `markdown-generator.js` and `ai-assistant.js`

Please open an issue before submitting a large PR so we can align on approach.

---

## License

MIT â€” see [LICENSE](LICENSE).

---

<div align="center">

Built with â˜• and frustration at copy-restricted textbook platforms.

**Star â­ if WebScribe saved you time.**

</div>
